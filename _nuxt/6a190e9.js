(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{274:function(t,e,r){var o=r(2),n=r(275),h=r(98);o({target:"Array",proto:!0},{fill:n}),h("fill")},275:function(t,e,r){"use strict";var o=r(25),n=r(99),h=r(18);t.exports=function(t){for(var e=o(this),r=h(e.length),l=arguments.length,c=n(l>1?arguments[1]:void 0,r),f=l>2?arguments[2]:void 0,d=void 0===f?r:n(f,r);d>c;)e[c++]=t;return e}},276:function(t,e,r){var content=r(279);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(102).default)("1b7833da",content,!0,{sourceMap:!1})},278:function(t,e,r){"use strict";r(276)},279:function(t,e,r){var o=r(101)(!1);o.push([t.i,"body{position:relative}canvas{display:block;position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:50% 50%;object-position:50% 50%;transform:scale(.98);background-color:#160804}",""]),t.exports=o},291:function(t,e,r){"use strict";r.r(e);var o=r(93),n=(r(46),r(135),r(9),r(19),r(74),r(36),r(274),r(60),r(199),r(100),r(43),r(34),{data:function(){return{word:"MOZART",backgroundColor:"#160804",filter:"brightness(120%)",fontFamily:"monospace",imageURL:"/jpegs/Mozart-Lange-darker.jpg",slideshowID:undefined,matches:{horz:[],vert:[]},matchFillStyle:"rgba(255, 0, 0, 0.5)",matchBoundaryFillStyle:"black",shuffle:undefined,textSize:20,theCanvas:{},theRatio:{}}},computed:{wordAsArray:function(){return this.word.split("")},factorial:function(){return this.factorialize(this.wordAsArray.length)}},mounted:function(){this.init();var t=this;window.addEventListener("keyup",(function(e){"Enter"===e.key?t.startOrStopOrToggleSlideshow(!0):"Escape"===e.key&&t.startOrStopOrToggleSlideshow(!1)}))},methods:{init:function(){var t=this;this.shuffle=this.doShuffle(this.factorial),document.getElementById("portrait-image").addEventListener("load",(function(e){t.createOrRedrawCanvas(this)}))},doShuffle:function(t){return function(t){for(var e,i,r=t.length;r;)i=Math.floor(Math.random()*r--),e=t[r],t[r]=t[i],t[i]=e;return t}(Object(o.a)(Array(t).keys()))},shuffleAndRedraw:function(){this.shuffle=this.doShuffle(this.factorial),this.createOrRedrawCanvas()},startOrStopOrToggleSlideshow:function(t){void 0===t&&(t=!this.slideshowID),t&&!this.slideshowID?(this.shuffleAndRedraw(),this.slideshowID=setInterval(function(){this.shuffleAndRedraw()}.bind(this),1e3)):!t&&this.slideshowID&&(clearInterval(this.slideshowID),this.slideshowID=void 0)},createOrRedrawCanvas:function(img){var t={filter:this.filter,fontFamily:this.fontFamily,resolution:this.calcResolution,shape:this.drawLetter,word:this.word,wordAsArray:this.wordAsArray};this.textSize=void 0,img?this.theCanvas=img.closePixelate(t):this.theCanvas.render(t)},pickShuffledPermutation:function(t){var e=this.shuffle[Math.floor(t)];return 0===e?new Array(this.wordAsArray.length).fill("Â·"):this.pickPermutation(this.wordAsArray,this.factorial,e)},pickPermutation:function(t,e,r){if(e<r)return console.log("n (".concat(r,") cannot be larger than factorial (").concat(e,") !!!")),[];for(var n,q,h,l=r,c=Object(o.a)(t),f=[],d=e;c.length>0;)q=(l-(n=l%(d/=c.length)))/d,h=c.splice(q,1)[0],f.push(h),l=n;return f},horizontal:function(t){for(var e=[],r={boundary:void 0,accumulator:[]},o=0;o<this.theRatio.y;o++)for(var col=0;col<this.theRatio.x;col++){var i=col+o*this.theRatio.x;0===e.length&&(e=this.pickShuffledPermutation(i/this.wordAsArray.length));var n=e.shift();i%this.wordAsArray.length==0&&(r.boundary=i-r.accumulator.length);var h=this.testIfMatch(this.wordAsArray,r,n);h&&this.matches.horz.push(h)}},vertical:function(t){for(var e={boundary:void 0,accumulator:[]},col=0;col<this.theRatio.x;col++)for(var r=0;r<this.theRatio.y;r++){var i=col+r*this.theRatio.x,o=i/this.wordAsArray.length,n=i%this.wordAsArray.length,h=this.pickShuffledPermutation(o)[n];e.boundary=e.boundary||i;var l=this.testIfMatch(this.wordAsArray,e,h);l&&this.matches.vert.push(l)}},storeMatches:function(){this.matches.horz.splice(0,this.matches.horz.length),this.matches.vert.splice(0,this.matches.vert.length),this.vertical(),this.horizontal()},printCandidate:function(t,e){for(var r=[],i=0;i<t.length;i++)i===e%t.length&&r.push("|"),r.push(t[i]);return r.join("")},resetCandidate:function(t){t.accumulator.splice(0,t.accumulator.length),t.boundary=void 0},testIfMatch:function(t,e,r){var o;e.accumulator.push(r);for(var i=0;i<e.accumulator.length;i++)if(e.accumulator[i]!==t[i]){this.resetCandidate(e);break}return i===t.length&&(o=e.boundary,this.resetCandidate(e)),o},getFontSizeToFit:function(t,text,e,r,o){t.save(),t.font="1px ".concat(e," ");var n=t.measureText(text),h=n.width,l=(n.fontBoundingBoxAscent,n.fontBoundingBoxDescent,n.actualBoundingBoxAscent+n.actualBoundingBoxDescent);return t.restore(),Math.min(r+2/h,o+2/l)},drawLetter:function(t,e,i,r,o,n,h,l){if(!(i>this.theRatio.x*this.theRatio.y)){var c=l;void 0!==c&&0!==c.length||(c=this.pickShuffledPermutation(i/e.length));var f=c.shift();if(this.textSize||(t.textAlign="center",t.textBaseline="bottom",t.shadowColor="#572010",t.shadowOffsetX=.5,this.textSize=this.getFontSizeToFit(t,f,this.fontFamily,n,h),t.font="".concat(this.textSize,"px ").concat(this.fontFamily)),i%this.theRatio.x<this.theRatio.x-this.wordAsArray.length&&this.matches.horz.length)for(var b=0;b<this.matches.horz.length;b++){var d=this.matches.horz[b];d<=i&&i<d+this.word.length&&(d===i?(t.save(),t.fillStyle=this.matchFillStyle,t.fillRect(r,o-2,n*this.word.length-1,h-1),t.restore()):i%e.length==0&&(t.save(),t.fillStyle=this.matchBoundaryFillStyle,t.fillRect(r,o-2,1,h-1),t.restore()))}if(this.matches.vert.length)for(var v=0;v<this.matches.vert.length;v++){var y=this.matches.vert[v];y<=i&&i<y+this.word.length&&y===i&&(t.save(),t.fillStyle=this.matchFillStyle,t.fillRect(r,o-3,n,h*this.word.length-1),t.restore())}return t.fillText(f,r+n/2,o+h,n),c}},calcResolution:function(t,e,r,o,n){var h=this.factorialize(t.length),l=this.getDivisorsList(h).map((function(t){return{x:t,y:h/t,ratio:t/(h/t)}})),c=o/n/(e/r),f=this.binarySearch(l.map((function(t){return t.ratio})),c),d=l[f].x*t.length,v=l[f].y,y=o/d,m=n/v;return this.theRatio={x:d,y:v,cx:y,cy:m,factorial:h},this.storeMatches(),this.theRatio},factorialize:function(t){if(void 0!==t)return t<0?-1:0===t?1:t*this.factorialize(t-1)},getDivisorsList:function(t){var e,r=[];return e=t,Object(o.a)(Array(e+1).keys()).slice(1).reduce((function(s,a){var t=!(e%a)&&a;return t&&r.push(t),s+t}),0),r},binarySearch:function(t,e){if(1===t.length)return 0;var r=Math.floor(t.length/2);return t[r]===e?r:t[r]>e?this.binarySearch(t.slice(0,r),e):t[r]<e?r+this.binarySearch(t.slice(r),e):r}}}),h=(r(278),r(55)),component=Object(h.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"vh-100",style:"background-color: "+t.backgroundColor,on:{click:t.shuffleAndRedraw}},[r("img",{attrs:{id:"portrait-image",src:t.imageURL}})])}),[],!1,null,null,null);e.default=component.exports}}]);